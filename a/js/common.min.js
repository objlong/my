function Message(msg, func, timeOut) { var msg = $('<div>' + msg + '</div>').dialog({ buttons: { 关闭: function () { $(this).dialog('close'); func(); } } }); if (timeOut) { setTimeout(function () { msg.dialog('close'); func(); }, timeOut); } return msg; } function JsonAutoClose(data, timeOut) { if (!timeOut) timeOut = 2000; JsonResult(data, null, null, timeOut); } function JsonResult(data, onSuccess, onFailed, timeOut) { try { data = eval(data); } catch (e) { } if (data.Success == '1') { if (data.Message) { var dialog = Message(data.Message, function () { onSuccess(data); }, timeOut); } else { onSuccess(data); } } else { if (data.Message) { var dialog = Message(data.Message, function () { onFailed(data); }, timeOut); } else { onFailed(data); } } } function SetNavClass(ulId, className) { var controller = $('#controller').val(); var action = $('#action').val(); eval('controller_' + controller + ' = true'); eval('action_' + action + ' = true'); var list = $(ulId + '>li'); for (var k = 0; k < list.length; k++) { var item = list[k]; var exp = $(item).attr('data-active'); try { if (eval(exp)) $(item).addClass(className); } catch (e) { } } }